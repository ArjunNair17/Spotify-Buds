{"ast":null,"code":"var _jsxFileName = \"/Users/shawnim/Documents/GitHub/SpotifyAppCS35L/src/screens/login/index.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport './login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst clientID = \"4db376ff1b0941de8908d1748f1eb266\";\nconst redirectURL = \"http://localhost:3000/main\";\nexport default function SignUpForm(_ref) {\n  _s();\n  let {\n    callback\n  } = _ref;\n  async function redirectToAuthCodeFlow(clientId) {\n    const verifier = generateCodeVerifier(128);\n    const challenge = await generateCodeChallenge(verifier);\n    localStorage.setItem(\"verifier\", verifier);\n    const params = new URLSearchParams();\n    params.append(\"client_id\", clientId);\n    params.append(\"response_type\", \"code\");\n    params.append(\"redirect_uri\", redirectURL);\n    params.append(\"scope\", \"user-read-private user-read-email user-read-currently-playing user-read-recently-played user-top-read\");\n    params.append(\"code_challenge_method\", \"S256\");\n    params.append(\"code_challenge\", challenge);\n    document.location = `https://accounts.spotify.com/authorize?${params.toString()}`;\n  }\n  function generateCodeVerifier(length) {\n    let text = '';\n    let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (let i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n  }\n  async function generateCodeChallenge(codeVerifier) {\n    const encoder = new TextEncoder();\n    const data = encoder.encode(codeVerifier);\n    const digest = await window.crypto.subtle.digest('SHA-256', data);\n    return btoa(String.fromCharCode(...new Uint8Array(digest))).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n  }\n  const [email, setEmail] = useState(\"\");\n  const [pwd, setPwd] = useState(\"\");\n  const handleLogIn = event => {\n    event.preventDefault();\n    const auth = getAuth();\n    signInWithEmailAndPassword(auth, email, pwd).then(userCredential => {\n      redirectToAuthCodeFlow(clientID);\n      localStorage.setItem(\"loggedIn\", \"true\");\n    }).catch(error => {\n      callback(false);\n      alert(error.message);\n    });\n    setEmail(\"\");\n    setPwd(\"\");\n  };\n  const handleSignUp = event => {\n    event.preventDefault();\n    const auth = getAuth();\n    createUserWithEmailAndPassword(auth, email, pwd).then(userCredential => alert(userCredential.user)).catch(error => {\n      alert(error.message);\n    });\n    setEmail(\"\");\n    setPwd(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"RestofPage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"SpotifyBuds\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        height: \"100px\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Username\",\n          value: email,\n          className: \"signupbar\",\n          onChange: event => setEmail(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: pwd,\n          className: \"signupbar\",\n          onChange: event => setPwd(event.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          onClick: event => handleSignUp(event),\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button2\",\n          onClick: event => handleLogIn(event),\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"RestofPage\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n}\n_s(SignUpForm, \"CIFaLbirhlB9EF32EPibQpCXy/8=\");\n_c = SignUpForm;\nvar _c;\n$RefreshReg$(_c, \"SignUpForm\");","map":{"version":3,"names":["React","useState","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","useNavigate","jsxDEV","_jsxDEV","clientID","redirectURL","SignUpForm","_ref","_s","callback","redirectToAuthCodeFlow","clientId","verifier","generateCodeVerifier","challenge","generateCodeChallenge","localStorage","setItem","params","URLSearchParams","append","document","location","toString","length","text","possible","i","charAt","Math","floor","random","codeVerifier","encoder","TextEncoder","data","encode","digest","window","crypto","subtle","btoa","String","fromCharCode","Uint8Array","replace","email","setEmail","pwd","setPwd","handleLogIn","event","preventDefault","auth","then","userCredential","catch","error","alert","message","handleSignUp","user","className","children","fileName","_jsxFileName","lineNumber","columnNumber","height","type","placeholder","value","onChange","target","onClick","_c","$RefreshReg$"],"sources":["/Users/shawnim/Documents/GitHub/SpotifyAppCS35L/src/screens/login/index.js"],"sourcesContent":["import React, { useState } from \"react\";\n\n\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport './login.css';\nconst clientID = \"4db376ff1b0941de8908d1748f1eb266\";\nconst redirectURL = \"http://localhost:3000/main\";\n\n\nexport default function SignUpForm( {callback}) {\n\n    async function redirectToAuthCodeFlow(clientId) {\n        const verifier = generateCodeVerifier(128);\n        const challenge = await generateCodeChallenge(verifier);\n    \n        localStorage.setItem(\"verifier\", verifier);\n    \n        const params = new URLSearchParams();\n        params.append(\"client_id\", clientId);\n        params.append(\"response_type\", \"code\");\n        params.append(\"redirect_uri\", redirectURL);\n        params.append(\"scope\", \"user-read-private user-read-email user-read-currently-playing user-read-recently-played user-top-read\");\n        params.append(\"code_challenge_method\", \"S256\");\n        params.append(\"code_challenge\", challenge);\n    \n        document.location = `https://accounts.spotify.com/authorize?${params.toString()}`;\n      }\n    \n      function generateCodeVerifier(length) {\n        let text = '';\n        let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    \n        for (let i = 0; i < length; i++) {\n          text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        return text;\n      }\n    \n      async function generateCodeChallenge(codeVerifier) {\n        const encoder = new TextEncoder();\n        const data = encoder.encode(codeVerifier);\n        const digest = await window.crypto.subtle.digest('SHA-256', data);\n        return btoa(String.fromCharCode(...new Uint8Array(digest)))\n          .replace(/\\+/g, '-')\n          .replace(/\\//g, '_')\n          .replace(/=+$/, '');\n      }\n\n    const [email, setEmail] = useState(\"\");\n    const [pwd, setPwd] = useState(\"\");\n    const handleLogIn = (event) => {\n        event.preventDefault();\n        const auth = getAuth();\n        signInWithEmailAndPassword(auth, email, pwd).then((userCredential) =>{ redirectToAuthCodeFlow(clientID); localStorage.setItem(\"loggedIn\", \"true\");}).catch((error) => {callback(false);alert(error.message)});\n        setEmail(\"\");\n        setPwd(\"\");\n    }\n\n    const handleSignUp = (event) => {\n        event.preventDefault();\n        const auth = getAuth();\n        createUserWithEmailAndPassword(auth, email, pwd).then((userCredential) => alert(userCredential.user)).catch((error) => {alert(error.message)});\n        setEmail(\"\");\n        setPwd(\"\");        \n    }\n    return (\n        <div className=\"RestofPage\">\n        <div className=\"container\">\n            <h1>SpotifyBuds</h1>\n            <form height=\"100px\">\n                <input type=\"email\" placeholder=\"Username\" value={email} className=\"signupbar\" onChange={(event) => setEmail(event.target.value)}></input>\n                \n                <input type=\"password\" placeholder=\"Password\" value={pwd} className=\"signupbar\" onChange={(event) => setPwd(event.target.value)}></input>\n                <button className=\"button\" onClick = {(event) => handleSignUp(event)}>Sign Up</button>{\" \"}\n                \n                <button className=\"button2\" onClick= {(event) => handleLogIn(event)}>Log In</button>\n            </form>\n        </div>\n        <div className=\"RestofPage\">\n        \n      </div>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}