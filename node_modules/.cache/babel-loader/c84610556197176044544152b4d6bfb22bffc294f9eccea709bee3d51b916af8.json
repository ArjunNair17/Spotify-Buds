{"ast":null,"code":"var _jsxFileName = \"/Users/shawnim/Documents/GitHub/SpotifyAppCS35L/src/screens/search/index.js\",\n  _s = $RefreshSig$();\nimport './Search.css';\nimport React, { useEffect, useState } from 'react';\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, onValue } from \"firebase/database\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Search() {\n  _s();\n  const [searchOption, setSearchOption] = useState('user');\n  const [searchText, setSearchText] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [userData, setUserData] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const db = getDatabase();\n        const usersRef = ref(db, 'users');\n        onValue(usersRef, snapshot => {\n          const data = snapshot.val();\n          console.log(data);\n          if (data) {\n            const userData = Object.values(data);\n            setUserData(userData);\n          }\n        });\n      } catch (error) {\n        console.log('Error fetching user data: ', error);\n      }\n    };\n    fetchData();\n  }, []);\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const earthRadiusInFeet = 20903520; // Approximate Earth radius in feet\n    const dLat = toRadians(lat2 - lat1);\n    const dLon = toRadians(lon2 - lon1);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distanceInFeet = earthRadiusInFeet * c;\n    const roundedDistance = distanceInFeet.toFixed(2); // Round to two decimal places\n    return roundedDistance;\n  };\n  const toRadians = degrees => {\n    return degrees * (Math.PI / 180);\n  };\n  const handleSearchOptionChange = event => {\n    setSearchOption(event.target.value);\n  };\n  const handleSearchTextChange = event => {\n    setSearchText(event.target.value);\n  };\n  const handleSearch = () => {\n    console.log(\"got here!\");\n    console.log(searchOption);\n    console.log(userData);\n    if (!userData) {\n      return; // Return early if userData is undefined\n    }\n\n    if (searchOption === 'artist') {\n      const filteredUsers = userData.filter(user => user.topArtists && user.topArtists.includes(searchText));\n      setSearchResults(filteredUsers);\n    } else if (searchOption === 'user') {\n      const filteredUsers = userData.filter(user => user.userName && user.userName.toLowerCase().includes(searchText.toLowerCase()));\n      console.log(filteredUsers);\n      setSearchResults(filteredUsers);\n    } else if (searchOption === 'song') {\n      const filteredUsers = userData.filter(user => user.currentSong && user.currentSong.toLowerCase().includes(searchText.toLowerCase()));\n      setSearchResults(filteredUsers);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"bar\",\n        type: \"text\",\n        value: searchText,\n        onChange: handleSearchTextChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: handleSearch,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: searchResults.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: searchResults.map(result => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"results\",\n          children: searchOption === 'artist' ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: result.userName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Username: \", result.userName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Current Song: \", result.currentSong]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Top Artists: \", result.artists.map(artist => artist.name).join(', ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 37\n          }, this)\n        }, result.uid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No results found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n_s(Search, \"m89rX46vW/2+tOGtPcyJFRVhRkQ=\");\n_c = Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useEffect","useState","initializeApp","getDatabase","ref","onValue","jsxDEV","_jsxDEV","Search","_s","searchOption","setSearchOption","searchText","setSearchText","searchResults","setSearchResults","userData","setUserData","fetchData","db","usersRef","snapshot","data","val","console","log","Object","values","error","calculateDistance","lat1","lon1","lat2","lon2","earthRadiusInFeet","dLat","toRadians","dLon","a","Math","sin","cos","c","atan2","sqrt","distanceInFeet","roundedDistance","toFixed","degrees","PI","handleSearchOptionChange","event","target","value","handleSearchTextChange","handleSearch","filteredUsers","filter","user","topArtists","includes","userName","toLowerCase","currentSong","children","className","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","map","result","artists","artist","name","join","uid","_c","$RefreshReg$"],"sources":["/Users/shawnim/Documents/GitHub/SpotifyAppCS35L/src/screens/search/index.js"],"sourcesContent":["import './Search.css'\nimport React, { useEffect, useState } from 'react';\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, onValue } from \"firebase/database\";\n\n\n\nexport default function Search() {\n    const [searchOption, setSearchOption] = useState('user');\n    const [searchText, setSearchText] = useState('');\n    const [searchResults, setSearchResults] = useState([]);\n    const [userData, setUserData] = useState([]);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const db = getDatabase();\n                const usersRef = ref(db, 'users');\n\n                onValue(usersRef, (snapshot) => {\n                    const data = snapshot.val();\n                    console.log(data);\n                    if (data) {\n                        const userData = Object.values(data);\n                        setUserData(userData);\n                    }\n                });\n            } catch (error) {\n                console.log('Error fetching user data: ', error);\n            }\n        };\n\n        fetchData();\n    }, []);\n\n    const calculateDistance = (lat1, lon1, lat2, lon2) => {\n        const earthRadiusInFeet = 20903520; // Approximate Earth radius in feet\n        const dLat = toRadians(lat2 - lat1);\n        const dLon = toRadians(lon2 - lon1);\n        const a =\n            Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n            Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) *\n            Math.sin(dLon / 2) * Math.sin(dLon / 2);\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        const distanceInFeet = earthRadiusInFeet * c;\n        const roundedDistance = distanceInFeet.toFixed(2); // Round to two decimal places\n        return roundedDistance;\n    };\n\n    const toRadians = (degrees) => {\n        return degrees * (Math.PI / 180);\n    };\n\n    const handleSearchOptionChange = (event) => {\n        setSearchOption(event.target.value);\n    };\n\n    const handleSearchTextChange = (event) => {\n        setSearchText(event.target.value);\n    };\n\n    const handleSearch = () => {\n        console.log(\"got here!\");\n        console.log(searchOption);\n        console.log(userData);\n        if (!userData) {\n            return; // Return early if userData is undefined\n        }\n\n        if (searchOption === 'artist') {\n            const filteredUsers = userData.filter((user) =>\n                user.topArtists && user.topArtists.includes(searchText)\n            );\n            setSearchResults(filteredUsers);\n        } else if (searchOption === 'user') {\n            const filteredUsers = userData.filter((user) =>\n                user.userName && user.userName.toLowerCase().includes(searchText.toLowerCase())\n            );\n            console.log(filteredUsers);\n            setSearchResults(filteredUsers);\n        } else if (searchOption === 'song') {\n            const filteredUsers = userData.filter((user) =>\n                user.currentSong && user.currentSong.toLowerCase().includes(searchText.toLowerCase())\n            );\n            setSearchResults(filteredUsers);\n        }\n    };\n\n    return (\n        <div>\n            <div>\n                {/* <select value={searchOption} onChange={handleSearchOptionChange}>\n                    <option value=\"\">Select an option</option>\n                    <option value=\"artist\">Search for artist</option>\n                    <option value=\"user\">Search for user</option>\n                    <option value=\"song\">Search for song</option>\n                </select> */}\n                <input className=\"bar\" type=\"text\" value={searchText} onChange={handleSearchTextChange} />\n                <button className=\"button\" onClick={handleSearch}>Search</button>\n            </div>\n            <div>\n                {searchResults.length > 0 ? (\n                    <ul>\n                        {searchResults.map((result) => (\n                            <li className=\"results\" key={result.uid}>\n                                {searchOption === 'artist' ? (\n                                    <span>{result.userName}</span>\n                                ) : (\n                                    <div>\n                                        <span>Username: {result.userName}</span>\n                                        <p></p>\n                                        <span>Current Song: {result.currentSong}</span>\n                                        <p></p>\n                                        <span>\n                                            Top Artists: {result.artists.map((artist) => artist.name).join(', ')}\n                                        </span>\n                                    </div>\n                                )}\n                            </li>\n                        ))}\n                    </ul>\n                ) : (\n                    <p>No results found.</p>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}